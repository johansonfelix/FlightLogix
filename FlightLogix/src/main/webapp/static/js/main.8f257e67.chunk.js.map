{"version":3,"sources":["Utils/httpRequestMaker.js","assets/logo.svg","Components/HeaderBar.js","App.js","Hooks/useToken.js","index.js"],"names":["tokenDecoder","token","decoded","jwt_decode","console","log","decodedHeader","header","sendRequest","type","url","json","a","Accept","request","method","headers","body","JSON","stringify","fetch","promise","message","ElevationScroll","props","children","window","trigger","useScrollTrigger","disableHysteresis","threshold","target","undefined","React","cloneElement","elevation","useStyles","makeStyles","appBar","backgroundColor","logo","justifyContent","width","maxWidth","ElevateAppBar","classes","Fragment","CssBaseline","AppBar","position","className","Toolbar","toolbar","src","alt","noWrap","Login","lazy","Dashboard","AdminDashboard","App","useState","localStorage","getItem","setToken","userToken","setItem","useToken","fallback","CircularProgress","path","exact","to","user_role","role","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8f257e67.chunk.js","sourcesContent":["import jwt_decode from \"jwt-decode\";\r\n\r\n//Returns a JSON in object format. \r\n\r\nexport function tokenDecoder(token){\r\n\r\n  var decoded = jwt_decode(token)\r\n  \r\n  console.log(decoded)\r\n  \r\n  /* prints:\r\n  * { foo: \"bar\",\r\n  *   exp: 1393286893,\r\n  *   iat: 1393268893  }\r\n  */\r\n  \r\n  // decode header by passing in options (useful for when you need `kid` to verify a JWT):\r\n  var decodedHeader = jwt_decode(token, { header: true })\r\n  console.log(decodedHeader)\r\n  \r\n  /* prints:\r\n  * { typ: \"JWT\",\r\n  *   alg: \"HS256\" }\r\n  */\r\n  return decoded\r\n}\r\n\r\nexport async function sendRequest(type, url,token, json){\r\n  console.log(\"Sending \" + type + \" request to \" + url + \" with message: \" + json + \" Using auth token: \" + token)\r\n  var header = {\r\n    Accept: \"application/json\"\r\n\r\n  }\r\n  if(token !== null){\r\n    header[\"Authorization\"] = \"Bearer \" + token\r\n  }\r\n  if(type === \"POST\" || type === \"PUT\"){\r\n    header[\"Content-Type\"] = \"application/json\"\r\n  }\r\n  var request = {\r\n    method: type,\r\n    headers: header,\r\n    body: json\r\n  }\r\n  console.log(\"Sending request: \")\r\n  console.log(JSON.stringify(request))\r\n  try{\r\n    var promise = await fetch(url, request)\r\n    console.log(promise);\r\n    return promise\r\n    \r\n    // var responseJsonPromise = await response.json()\r\n    // var responseJson = await responseJsonPromise;\r\n    // console.log(\"Received reply: \" + JSON.stringify(responseJson))\r\n    // return responseJson //json object (non-string)\r\n  }\r\n  catch(error){\r\n    console.log(error.message)\r\n    return null\r\n  }\r\n}\r\n  \r\n","export default __webpack_public_path__ + \"static/media/logo.616562ba.svg\";","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport useScrollTrigger from '@material-ui/core/useScrollTrigger';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport logo from '../assets/logo.svg';\r\n\r\nfunction ElevationScroll(props) {\r\n  const { children, window } = props;\r\n  // Note that you normally won't need to set the window ref as useScrollTrigger\r\n  // will default to window.\r\n  // This is only being set here because the demo is in an iframe.\r\n  const trigger = useScrollTrigger({\r\n    disableHysteresis: true,\r\n    threshold: 0,\r\n    target: window ? window() : undefined,\r\n  });\r\n\r\n  return React.cloneElement(children, {\r\n    elevation: trigger ? 4 : 0,\r\n  });\r\n}\r\n\r\nElevationScroll.propTypes = {\r\n  children: PropTypes.element.isRequired,\r\n  /**\r\n   * Injected by the documentation to work in an iframe.\r\n   * You won't need it on your project.\r\n   */\r\n  window: PropTypes.func,\r\n};\r\nconst useStyles = makeStyles( {\r\n\r\n appBar: {\r\n        backgroundColor: '#fff'\r\n },\r\n logo: {\r\n    justifyContent: 'center',\r\n    width: '200px',\r\n    maxWidth: '50%',\r\n}}\r\n);\r\nexport default function ElevateAppBar(props) {\r\n    const classes = useStyles();\r\n  return (\r\n    <React.Fragment>\r\n      <CssBaseline />\r\n      <ElevationScroll {...props}>\r\n        <AppBar position=\"fixed\" className={classes.appBar}>\r\n           <Toolbar className={classes.toolbar}>\r\n                           \r\n                            <img src={logo} alt=\"FlightLogixLogo\" noWrap className={classes.logo} />\r\n                            </Toolbar>\r\n        </AppBar>\r\n      </ElevationScroll>\r\n      <Toolbar />\r\n      \r\n    </React.Fragment>\r\n  );\r\n}\r\n","import './App.css';\r\nimport React, { Suspense } from 'react';\r\nimport HeaderBar from './Components/HeaderBar';\r\nimport useToken from './Hooks/useToken';\r\nimport { Fragment } from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport { tokenDecoder } from './Utils/httpRequestMaker';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\n\r\nconst Login = React.lazy(() => import('./Pages/Login'));\r\nconst Dashboard = React.lazy(() => import('./Pages/UserDashboard/Dashboard'));\r\nconst AdminDashboard = React.lazy(() => import('./Pages/AdminDashboard/Dashboard'));\r\n\r\nfunction App() {\r\n\r\n  const { setToken, token } = useToken();\r\n\r\n  if (!token) {\r\n    return (\r\n      <Fragment>\r\n\r\n        <HeaderBar />\r\n        <Suspense fallback={<div className=\"center\"><CircularProgress /></div>}>\r\n          <Switch>\r\n            <Route path='/' exact>\r\n              <Login setToken={setToken} token={token} />\r\n            </Route>\r\n\r\n            <Route path='*'>\r\n              <Redirect to='/' />\r\n            </Route>\r\n          </Switch>\r\n        </Suspense>\r\n\r\n      </Fragment>\r\n\r\n    );\r\n  };\r\n\r\n  const user_role = tokenDecoder(token).role;\r\n\r\n  if (user_role === 'CUSTOMER') {\r\n    return (\r\n      <Fragment>\r\n        <Suspense fallback={<div className=\"center\"><CircularProgress /></div>}>\r\n          <Switch>\r\n          <Route path='/home' exact>\r\n              <Dashboard token={token} setToken={setToken} />\r\n            </Route>\r\n            <Route path='/' exact>\r\n              <Redirect to='/home' />\r\n            </Route>          \r\n            <Route path='/search' exact>\r\n              <Dashboard token={token} setToken={setToken} />\r\n            </Route>\r\n            <Route path='/mybookings' exact>\r\n              <Dashboard token={token} setToken={setToken} />\r\n            </Route>\r\n            <Route path='/myaccount' exact>\r\n              <Dashboard token={token} setToken={setToken} />\r\n            </Route>\r\n            <Route path='*'>\r\n              <Redirect to='/home' />\r\n            </Route>\r\n          </Switch>\r\n        </Suspense>\r\n      </Fragment>\r\n\r\n\r\n    )\r\n\r\n  }\r\n\r\n  if (user_role === 'ADMIN') {\r\n    return (\r\n      <Fragment>\r\n        <Suspense fallback={<div className=\"center\"><CircularProgress /></div>}>\r\n          <Switch>\r\n            <Route path='/home' exact>\r\n              <AdminDashboard token={token} setToken={setToken} />\r\n            </Route>\r\n\r\n            <Route path='/viewusers' exact>\r\n              <AdminDashboard token={token} setToken={setToken} />\r\n            </Route>\r\n\r\n            <Route path='/search' exact>\r\n              <AdminDashboard token={token} setToken={setToken} />\r\n            </Route>\r\n\r\n            <Route path='*'>\r\n              <Redirect to='/home' />\r\n            </Route>\r\n\r\n          </Switch>\r\n\r\n        </Suspense></Fragment>\r\n\r\n\r\n    )\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default App;\r\n","import { useState } from 'react';\r\n\r\nexport default function useToken() {\r\n\r\n  function getToken() {\r\n    return localStorage.getItem('token');\r\n  };\r\n\r\n  const [token, setToken] = useState(getToken());\r\n\r\n   const saveToken = userToken => {\r\n    console.log(\"CALLED\")\r\n    localStorage.setItem('token', userToken);\r\n    setToken(userToken); \r\n  };\r\n\r\n  return {\r\n    \r\n    setToken : saveToken, \r\n      token\r\n    \r\n  }\r\n};  \r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {BrowserRouter} from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n\nReactDOM.render(\n  <React.StrictMode>\n     <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}